const knowledgeBase = {
    calendario: {
        keywords: ['calendario', 'fechas', 'semestre', 'vacaciones', 'inscripciones', 'inicio', 'fin', 'clases'],
        response: `📅 **CALENDARIO ESCOLAR ENERO-JUNIO 2025**

**📖 PERIODO SEMESTRAL:**
• Inicio de clases: 27 de enero de 2025
• Fin de clases: 30 de mayo de 2025

**🏖️ VACACIONES:**
• Primavera: 14-25 abril 2025
• Verano: 7 julio - 1 agosto 2025

**🎉 DÍAS FESTIVOS:**
• 3 febrero - Constitución
• 17 marzo - Benito Juárez
• 1 mayo - Día del Trabajo
• 5 mayo - Batalla de Puebla
• 15 mayo - Día del Maestro
• 23 julio - Día del TecNM

**📥 DESCARGAR CALENDARIO OFICIAL:**
<a href='https://www.mochis.tecnm.mx/wp-content/uploads/2025/02/Calendario-Enero-Junio-2025.pdf' target='_blank' class='btn-download'>📥 Descargar PDF Completo</a>
<a href='https://www.mochis.tecnm.mx' target='_blank' class='btn-link'>🔗 Sitio Web Oficial</a>`
    },
    
    licenciaturas: {
        keywords: ['carrera', 'carreras', 'licenciatura', 'ingeniería', 'ingeniero', 'estudiar', 'oferta', 'que estudiar'],
        response: `🎓 **OFERTA EDUCATIVA - LICENCIATURAS**

**UNIDAD LOS MOCHIS:**

🏗️ Ingeniería Civil
⚡ Ingeniería Eléctrica
🔌 Ingeniería Electrónica
🏭 Ingeniería Industrial
⚙️ Ingeniería Mecánica
🧪 Ingeniería Química
💻 Ing. en Sistemas Computacionales
💼 Ing. en Gestión Empresarial
🧬 Ingeniería Bioquímica
📊 Contador Público
📈 Lic. en Administración

**UNIDAD VILLA DE AHOME:**
• Ingeniería Industrial
• Ing. en Gestión Empresarial

**UNIDAD EL FUERTE:**
• Ing. en Innovación Agrícola Sustentable

⏱️ Duración: 9 semestres (4.5 años)
✅ Validez oficial SEP en todo México`
    },
    
    admision: {
        keywords: ['admisión', 'admision', 'ingreso', 'nuevo ingreso', 'inscripción', 'inscripcion', 'registro', 'examen', 'ficha', 'como entrar', 'requisitos'],
        response: `📝 **PROCESO DE ADMISIÓN 2025**

**PRIMER BLOQUE:**
📅 Registro: 3 febrero - 30 mayo 2025
📝 Examen: 11-12 junio 2025
⏰ Horarios: 8:00-11:00 y 14:00-17:00 hrs
📍 Lugar: Macrocentro de Cómputo

**SEGUNDO BLOQUE:**
📅 Registro: 3 junio - 31 julio 2025
📝 Examen: 5 agosto 2025
⏰ Horario: 9:00-12:00 hrs

**💰 COSTO DE INSCRIPCIÓN:**
$5,090 MXN (incluye curso de homogeneización)

**📋 REQUISITOS:**
✅ Certificado de bachillerato
✅ Acta de nacimiento
✅ CURP actualizado
✅ 6 fotografías tamaño infantil
✅ Aprobar examen de admisión

🔗 Más información: www.mochis.tecnm.mx`
    },
    
    costos: {
        keywords: ['costo', 'costos', 'precio', 'cuota', 'cuanto cuesta', 'pagar', 'mensualidad', 'colegiatura'],
        response: `💰 **COSTOS Y COLEGIATURAS**

**INSCRIPCIÓN INICIAL:**
$5,090 MXN (incluye curso de homogeneización)

**REINSCRIPCIÓN SEMESTRAL:**
$2,000 - $3,500 MXN aprox.

**COSTO TOTAL CARRERA (4.5 años):**
$43,000 - $77,000 MXN
💳 Promedio mensual: $800 - $1,400 MXN

**💡 INSTITUCIÓN PÚBLICA FEDERAL**
✅ 60-80% más económico que privadas
✅ Excelente calidad educativa
✅ Múltiples opciones de becas

**FORMAS DE PAGO:**
• Depósito bancario
• Transferencia electrónica
• Pago en línea (SII)

✨ Con becas puedes estudiar CASI GRATIS`
    },
    
    becas: {
        keywords: ['beca', 'becas', 'apoyo económico', 'apoyo economico', 'ayuda', 'financiero', 'dinero'],
        response: `💰 **PROGRAMA DE BECAS Y APOYOS**

**BECAS INSTITUCIONALES TecNM:**
• Beca de Excelencia (promedio 90+): $1,000-3,500/sem
• Beca de Apoyo Institucional: $800-2,500/sem
• Beca de Vinculación: $1,000-2,500/mes
• Beca de Servicio Social: $800-1,500/mes
• Beca de Titulación: $1,500-3,000 único
• Beca Deportiva/Cultural: $500-2,000/sem

**BECAS EXTERNAS:**
💵 Becas Municipales Ahome: $1,500-2,500/sem
💵 Becas Benito Juárez Federal: $14,700/año
💵 Becas Estatales Sinaloa: Variable
💵 Becas CONACYT Posgrado: $9,000-12,000/mes

**💡 ESTRATEGIA: COMBINAR BECAS**
Ejemplo estudiante destacado:
• Excelencia: $7,000/año
• Municipal: $4,000/año
• Benito Juárez: $14,700/año
= $25,700 al año 🎉

✅ Puedes cubrir 100% de tus gastos con becas`
    },
    
    posgrados: {
        keywords: ['posgrado', 'posgrados', 'maestría', 'maestria', 'conacyt', 'postgrado'],
        response: `🎓 **PROGRAMAS DE POSGRADO**

**MAESTRÍA EN INGENIERÍA**
✅ Reconocimiento CONACYT (SNP)
• Duración: 2 años (4 semestres)
• Orientación: Investigación aplicada
• Líneas: Industrial, Eléctrica, Ciencias

**MAESTRÍA EN PLANIFICACIÓN DE EMPRESAS**
**Y DESARROLLO REGIONAL**
✅ Reconocimiento CONACYT (SNP)
• Duración: 2 años (4 semestres)
• Orientación: Profesionalizante
• Líneas: Planificación, Desarrollo Regional

**💰 BECA CONACYT DISPONIBLE:**
💵 $9,000-12,000 pesos mensuales
📅 24 meses completos
🏥 Seguro médico incluido
📚 Apoyo para gastos académicos

**Total beca 2 años: $216,000-288,000 MXN**

**BENEFICIOS:**
✅ Grupos reducidos (atención personalizada)
✅ Profesores con doctorado
✅ Movilidad internacional
✅ Vinculación con sector productivo`
    },
    
    servicio_social: {
        keywords: ['servicio social', 'servicio', 'social', '480 horas', 'prestador'],
        response: `💼 **SERVICIO SOCIAL - GUÍA COMPLETA**

**REQUISITOS:**
✅ 70% de créditos cubiertos
✅ Estar inscrito en el semestre
✅ Kárdex actualizado
✅ Sin adeudos administrativos

**DURACIÓN:**
• Mínimo: 6 meses
• Total: 480 horas
• Horario: Según programa

**📅 SEMINARIO OBLIGATORIO:**
Fecha: 6 de febrero de 2025
Lugar: Por confirmar

**LUGARES DONDE REALIZAR:**
• Instituciones públicas (gobierno)
• Organizaciones de la sociedad civil
• Programas comunitarios
• Proyectos internos del TecNM
• Instituciones educativas

**💰 BECA DISPONIBLE:**
Apoyo económico mensual durante servicio
Consultar convocatoria en Gestión Tecnológica

**PROCESO:**
1. Asistir a seminario (obligatorio)
2. Elegir programa/institución
3. Registrar en Gestión Tecnológica
4. Realizar 480 horas
5. Entregar reporte final
6. Obtener carta de liberación

⚠️ REQUISITO OBLIGATORIO para titularte`
    },
    
    residencias: {
        keywords: ['residencia', 'residencias', 'profesional', 'profesionales', 'prácticas', 'practicas', 'empresa', 'proyecto'],
        response: `🏢 **RESIDENCIAS PROFESIONALES - GUÍA**

**REQUISITOS:**
✅ 85% de créditos cubiertos
✅ Servicio social liberado o avanzado
✅ Estar inscrito
✅ Kárdex actualizado

**DURACIÓN:**
• 4-6 meses (según carrera)
• Mínimo 320 horas de trabajo
• Horario: Según acuerdo con empresa

**📅 SEMINARIO OBLIGATORIO:**
Fecha: 20 de febrero de 2025
Lugar: Por confirmar

**BENEFICIOS:**
✅ Experiencia profesional real
✅ Networking empresarial
✅ 70% son contratados después
✅ Puede ser opción de titulación
✅ Algunas empresas pagan beca
✅ Carta de recomendación

**SECTORES DISPONIBLES:**
• Industria manufacturera
• Tecnologías de información
• Construcción y obra civil
• Empresas químicas
• Gobierno municipal/estatal
• Investigación y desarrollo

**PROCESO:**
1. Asistir a seminario
2. Buscar empresa/proyecto
3. Registrar en Gestión Tecnológica
4. Desarrollar proyecto
5. Elaborar informe técnico
6. Presentar ante jurado

💡 Tu puerta de entrada al mundo laboral`
    },
    
    titulacion: {
        keywords: ['titulación', 'titulacion', 'titulo', 'tesis', 'egel', 'graduación', 'graduacion', 'cedula'],
        response: `🎓 **OPCIONES DE TITULACIÓN**

**6 MODALIDADES DISPONIBLES:**

**1️⃣ Tesis Profesional**
• Investigación original
• Duración: 6-18 meses
• Con asesor de tesis

**2️⃣ Residencia Profesional**
• Tu residencia = título
• Calificación mínima: 80/100
• Informe técnico + examen

**3️⃣ Examen EGEL (CENEVAL)**
• Estandarizado nacional
• Sin tesis ni examen profesional
• Costo: $3,500-4,500
• Resultado satisfactorio/sobresaliente

**4️⃣ Promedio Destacado**
• Promedio 90+ sin reprobadas
• Titulación automática
• Reconocimiento a excelencia

**5️⃣ Estudios de Posgrado**
• Cursar maestría en TecNM
• Acreditar 12 créditos mínimo
• Promedio 80+ en posgrado

**6️⃣ Titulación Integral**
• Programa desde 1er semestre
• Acumular puntos durante carrera
• Alcanzar puntaje mínimo

**📅 CONVOCATORIAS 2025:**
• 1ra: Registro 8-20 feb, Ceremonia mayo
• 2da: Registro 10-30 may, Ceremonia julio
• 3ra: Registro desde 30 mayo

💡 Elige la opción que mejor se adapte a ti`
    },
    
    idiomas: {
        keywords: ['inglés', 'ingles', 'idioma', 'idiomas', 'toefl', 'certificación', 'certificacion'],
        response: `🌍 **CENTRO DE IDIOMAS - INGLÉS**

⚠️ **REQUISITO OBLIGATORIO DE EGRESO**
Sin inglés = No hay título

**NIVELES DISPONIBLES:**
• Nivel 1-2: Básico (A1-A2)
• Nivel 3-4: Intermedio (B1-B1+)
• Nivel 5-6: Avanzado (B2-B2+)

**CURSOS:**
• Semestrales: $1,000-1,500
• Duración: 18 semanas por nivel
• Intensivos de verano disponibles

**EXAMEN DE LIBERACIÓN:**
💰 Costo: $500-800
📅 Convocatoria 2026: Por publicarse
✅ Calificación mínima: 70/100

**CERTIFICACIONES:**
• TOEFL ITP: $600-900 (en TecNM)
• TOEFL iBT: $200-250 USD
• Cambridge: $3,000-5,000
• TOEIC: $1,500-2,000

**INSTALACIONES:**
✅ Laboratorio de idiomas (40 PC)
✅ Plataformas digitales
✅ Profesores certificados

**BENEFICIOS DEL INGLÉS:**
💰 20-30% más de salario
🌍 Movilidad internacional
💼 Más ofertas de empleo
📚 Acceso a información técnica

📞 Informes: Centro de Idiomas, Ext. 160`
    },
    
    contacto: {
        keywords: ['contacto', 'teléfono', 'telefono', 'dirección', 'direccion', 'ubicación', 'ubicacion', 'donde', 'dónde'],
        response: `📞 **INFORMACIÓN DE CONTACTO**

**📍 DIRECCIÓN:**
Juan de Dios Bátiz y 20 de Noviembre
Col. Francisco Villa
Los Mochis, Sinaloa, México
C.P. 81259

**☎️ TELÉFONOS:**
(668) 812-4939
(668) 815-0650 al 54

**🌐 WEB Y REDES:**
🔗 www.mochis.tecnm.mx
📱 Twitter: @TecNMLosMochis
📘 Facebook: TecNM Los Mochis
📸 Instagram: @tecnmlosmochis

**⏰ HORARIOS:**
Lunes a Viernes: 8:00 - 15:00 hrs
(Áreas administrativas)

**🚌 CÓMO LLEGAR:**
Rutas: Juan de Dios Bátiz, Centro-Tec, Jiquilpan
Parada justo afuera del TecNM

🐉 #SomosDragonesITLM`
    },
    
    historia: {
        keywords: ['historia', 'aniversario', 'fundación', 'fundacion', 'años', 'dragones', 'origen'],
        response: `🏛️ **HISTORIA DEL TecNM LOS MOCHIS**

**🎂 48 AÑOS DE EXCELENCIA (1976-2024)**

**Fundación:** 1976
Una de las primeras instituciones tecnológicas de Sinaloa

**2014:** Integración al Tecnológico Nacional de México

**2023:** Gran logro - Ingreso al Sistema Nacional
de Posgrados CONACYT ✅

**2024:** Celebración 48 Aniversario

**🐉 IDENTIDAD:**
Mascota: Los Dragones
Lema: El progreso como meta,
los principios como guía

**PARTE DEL TecNM:**
• 254 campus en México
• 600,000+ estudiantes
• Sistema más grande del país

**IMPACTO:**
• Miles de egresados exitosos
• Desarrollo regional
• Vinculación empresarial
• Investigación aplicada

🐉 #SomosDragonesITLM
48 años formando profesionistas de excelencia`
    }
};

window.onload = function() {
    addBotMessage(`¡Hola! 👋 Soy tu **Asistente Virtual Oficial** del **Tecnológico Nacional de México Campus Los Mochis**.

🐉 **#SomosDragonesITLM** - 48 años de excelencia

**Puedo ayudarte con:**

📚 Licenciaturas y Posgrados
📝 Proceso de Admisión 2025
💰 Costos, Becas y Apoyos
📅 Calendario Escolar 2025
🎓 Titulación (6 opciones)
💼 Servicio Social y Residencias
🌍 Idiomas y Certificaciones
📞 Contacto e Información

**¿En qué puedo ayudarte hoy?**

💡 Tip: Usa los botones rápidos o escribe tu pregunta`);
    
    document.getElementById('userInput').focus();
};


function sendMessage() {
    const input = document.getElementById('userInput');
    const message = input.value.trim();
    
    if (message === '') return;
    
    addUserMessage(message);
    input.value = '';
    
    showTyping();
    
    setTimeout(() => {
        hideTyping();
        const response = getBotResponse(message);
        addBotMessage(response);
    }, 1000);
}


function sendQuickMessage(query) {
    document.getElementById('userInput').value = query;
    sendMessage();
}


document.getElementById('userInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});
    

function addUserMessage(text) {
    const messagesDiv = document.getElementById('messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message user-message';
    messageDiv.innerHTML = `
        <div class="avatar user-avatar">👤</div>
        <div class="message-content">${escapeHtml(text)}</div>
    `;
    messagesDiv.appendChild(messageDiv);
    scrollToBottom();
}


function addBotMessage(text) {
    const messagesDiv = document.getElementById('messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message bot-message';
    messageDiv.innerHTML = `
        <div class="avatar bot-avatar">🤖</div>
        <div class="message-content">${formatMessage(text)}</div>
    `;
    messagesDiv.appendChild(messageDiv);
    scrollToBottom();
}
 

function getBotResponse(message) {
    const normalized = message.toLowerCase();
    
    for (const [key, data] of Object.entries(knowledgeBase)) {
        for (const keyword of data.keywords) {
            if (normalized.includes(keyword)) {
                return data.response;
            }
        }
    }
    
    return `Gracias por tu pregunta. 

Puedo ayudarte con información sobre:

📚 **Carreras** - 11 licenciaturas disponibles
📝 **Admisión** - Proceso completo 2025
💰 **Becas** - Apoyo económico
📅 **Calendario** - Fechas importantes
🎓 **Titulación** - 6 opciones
💼 **Servicio Social** - Requisitos
🏢 **Residencias** - Guía completa
🌍 **Idiomas** - Centro de inglés
📞 **Contacto** - Ubicación e información

🐉 Escribe una palabra clave como: "carreras", "admisión", "becas", etc.`;
}



function formatMessage(text) {
    return text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br>');
}



function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}


function showTyping() {
    document.getElementById('typingIndicator').style.display = 'flex';
    scrollToBottom();
}



function hideTyping() {
    document.getElementById('typingIndicator').style.display = 'none';
}



function scrollToBottom() {
    const container = document.getElementById('chatContainer');
    setTimeout(() => {
        container.scrollTop = container.scrollHeight;
    }, 100);
}

console.log('🤖 Chatbot TecNM Los Mochis iniciado correctamente');
console.log('🐉 #SomosDragonesITLM');