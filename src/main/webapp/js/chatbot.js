const knowledgeBase = {
    calendario: {
        keywords: ['calendario', 'fechas', 'semestre', 'vacaciones', 'inscripciones', 'inicio', 'fin', 'clases'],
        response: `ğŸ“… **CALENDARIO ESCOLAR ENERO-JUNIO 2025**

**ğŸ“– PERIODO SEMESTRAL:**
â€¢ Inicio de clases: 27 de enero de 2025
â€¢ Fin de clases: 30 de mayo de 2025

**ğŸ–ï¸ VACACIONES:**
â€¢ Primavera: 14-25 abril 2025
â€¢ Verano: 7 julio - 1 agosto 2025

**ğŸ‰ DÃAS FESTIVOS:**
â€¢ 3 febrero - ConstituciÃ³n
â€¢ 17 marzo - Benito JuÃ¡rez
â€¢ 1 mayo - DÃ­a del Trabajo
â€¢ 5 mayo - Batalla de Puebla
â€¢ 15 mayo - DÃ­a del Maestro
â€¢ 23 julio - DÃ­a del TecNM

**ğŸ“¥ DESCARGAR CALENDARIO OFICIAL:**
<a href='https://www.mochis.tecnm.mx/wp-content/uploads/2025/02/Calendario-Enero-Junio-2025.pdf' target='_blank' class='btn-download'>ğŸ“¥ Descargar PDF Completo</a>
<a href='https://www.mochis.tecnm.mx' target='_blank' class='btn-link'>ğŸ”— Sitio Web Oficial</a>`
    },
    
    licenciaturas: {
        keywords: ['carrera', 'carreras', 'licenciatura', 'ingenierÃ­a', 'ingeniero', 'estudiar', 'oferta', 'que estudiar'],
        response: `ğŸ“ **OFERTA EDUCATIVA - LICENCIATURAS**

**UNIDAD LOS MOCHIS:**

ğŸ—ï¸ IngenierÃ­a Civil
âš¡ IngenierÃ­a ElÃ©ctrica
ğŸ”Œ IngenierÃ­a ElectrÃ³nica
ğŸ­ IngenierÃ­a Industrial
âš™ï¸ IngenierÃ­a MecÃ¡nica
ğŸ§ª IngenierÃ­a QuÃ­mica
ğŸ’» Ing. en Sistemas Computacionales
ğŸ’¼ Ing. en GestiÃ³n Empresarial
ğŸ§¬ IngenierÃ­a BioquÃ­mica
ğŸ“Š Contador PÃºblico
ğŸ“ˆ Lic. en AdministraciÃ³n

**UNIDAD VILLA DE AHOME:**
â€¢ IngenierÃ­a Industrial
â€¢ Ing. en GestiÃ³n Empresarial

**UNIDAD EL FUERTE:**
â€¢ Ing. en InnovaciÃ³n AgrÃ­cola Sustentable

â±ï¸ DuraciÃ³n: 9 semestres (4.5 aÃ±os)
âœ… Validez oficial SEP en todo MÃ©xico`
    },
    
    admision: {
        keywords: ['admisiÃ³n', 'admision', 'ingreso', 'nuevo ingreso', 'inscripciÃ³n', 'inscripcion', 'registro', 'examen', 'ficha', 'como entrar', 'requisitos'],
        response: `ğŸ“ **PROCESO DE ADMISIÃ“N 2025**

**PRIMER BLOQUE:**
ğŸ“… Registro: 3 febrero - 30 mayo 2025
ğŸ“ Examen: 11-12 junio 2025
â° Horarios: 8:00-11:00 y 14:00-17:00 hrs
ğŸ“ Lugar: Macrocentro de CÃ³mputo

**SEGUNDO BLOQUE:**
ğŸ“… Registro: 3 junio - 31 julio 2025
ğŸ“ Examen: 5 agosto 2025
â° Horario: 9:00-12:00 hrs

**ğŸ’° COSTO DE INSCRIPCIÃ“N:**
$5,090 MXN (incluye curso de homogeneizaciÃ³n)

**ğŸ“‹ REQUISITOS:**
âœ… Certificado de bachillerato
âœ… Acta de nacimiento
âœ… CURP actualizado
âœ… 6 fotografÃ­as tamaÃ±o infantil
âœ… Aprobar examen de admisiÃ³n

ğŸ”— MÃ¡s informaciÃ³n: www.mochis.tecnm.mx`
    },
    
    costos: {
        keywords: ['costo', 'costos', 'precio', 'cuota', 'cuanto cuesta', 'pagar', 'mensualidad', 'colegiatura'],
        response: `ğŸ’° **COSTOS Y COLEGIATURAS**

**INSCRIPCIÃ“N INICIAL:**
$5,090 MXN (incluye curso de homogeneizaciÃ³n)

**REINSCRIPCIÃ“N SEMESTRAL:**
$2,000 - $3,500 MXN aprox.

**COSTO TOTAL CARRERA (4.5 aÃ±os):**
$43,000 - $77,000 MXN
ğŸ’³ Promedio mensual: $800 - $1,400 MXN

**ğŸ’¡ INSTITUCIÃ“N PÃšBLICA FEDERAL**
âœ… 60-80% mÃ¡s econÃ³mico que privadas
âœ… Excelente calidad educativa
âœ… MÃºltiples opciones de becas

**FORMAS DE PAGO:**
â€¢ DepÃ³sito bancario
â€¢ Transferencia electrÃ³nica
â€¢ Pago en lÃ­nea (SII)

âœ¨ Con becas puedes estudiar CASI GRATIS`
    },
    
    becas: {
        keywords: ['beca', 'becas', 'apoyo econÃ³mico', 'apoyo economico', 'ayuda', 'financiero', 'dinero'],
        response: `ğŸ’° **PROGRAMA DE BECAS Y APOYOS**

**BECAS INSTITUCIONALES TecNM:**
â€¢ Beca de Excelencia (promedio 90+): $1,000-3,500/sem
â€¢ Beca de Apoyo Institucional: $800-2,500/sem
â€¢ Beca de VinculaciÃ³n: $1,000-2,500/mes
â€¢ Beca de Servicio Social: $800-1,500/mes
â€¢ Beca de TitulaciÃ³n: $1,500-3,000 Ãºnico
â€¢ Beca Deportiva/Cultural: $500-2,000/sem

**BECAS EXTERNAS:**
ğŸ’µ Becas Municipales Ahome: $1,500-2,500/sem
ğŸ’µ Becas Benito JuÃ¡rez Federal: $14,700/aÃ±o
ğŸ’µ Becas Estatales Sinaloa: Variable
ğŸ’µ Becas CONACYT Posgrado: $9,000-12,000/mes

**ğŸ’¡ ESTRATEGIA: COMBINAR BECAS**
Ejemplo estudiante destacado:
â€¢ Excelencia: $7,000/aÃ±o
â€¢ Municipal: $4,000/aÃ±o
â€¢ Benito JuÃ¡rez: $14,700/aÃ±o
= $25,700 al aÃ±o ğŸ‰

âœ… Puedes cubrir 100% de tus gastos con becas`
    },
    
    posgrados: {
        keywords: ['posgrado', 'posgrados', 'maestrÃ­a', 'maestria', 'conacyt', 'postgrado'],
        response: `ğŸ“ **PROGRAMAS DE POSGRADO**

**MAESTRÃA EN INGENIERÃA**
âœ… Reconocimiento CONACYT (SNP)
â€¢ DuraciÃ³n: 2 aÃ±os (4 semestres)
â€¢ OrientaciÃ³n: InvestigaciÃ³n aplicada
â€¢ LÃ­neas: Industrial, ElÃ©ctrica, Ciencias

**MAESTRÃA EN PLANIFICACIÃ“N DE EMPRESAS**
**Y DESARROLLO REGIONAL**
âœ… Reconocimiento CONACYT (SNP)
â€¢ DuraciÃ³n: 2 aÃ±os (4 semestres)
â€¢ OrientaciÃ³n: Profesionalizante
â€¢ LÃ­neas: PlanificaciÃ³n, Desarrollo Regional

**ğŸ’° BECA CONACYT DISPONIBLE:**
ğŸ’µ $9,000-12,000 pesos mensuales
ğŸ“… 24 meses completos
ğŸ¥ Seguro mÃ©dico incluido
ğŸ“š Apoyo para gastos acadÃ©micos

**Total beca 2 aÃ±os: $216,000-288,000 MXN**

**BENEFICIOS:**
âœ… Grupos reducidos (atenciÃ³n personalizada)
âœ… Profesores con doctorado
âœ… Movilidad internacional
âœ… VinculaciÃ³n con sector productivo`
    },
    
    servicio_social: {
        keywords: ['servicio social', 'servicio', 'social', '480 horas', 'prestador'],
        response: `ğŸ’¼ **SERVICIO SOCIAL - GUÃA COMPLETA**

**REQUISITOS:**
âœ… 70% de crÃ©ditos cubiertos
âœ… Estar inscrito en el semestre
âœ… KÃ¡rdex actualizado
âœ… Sin adeudos administrativos

**DURACIÃ“N:**
â€¢ MÃ­nimo: 6 meses
â€¢ Total: 480 horas
â€¢ Horario: SegÃºn programa

**ğŸ“… SEMINARIO OBLIGATORIO:**
Fecha: 6 de febrero de 2025
Lugar: Por confirmar

**LUGARES DONDE REALIZAR:**
â€¢ Instituciones pÃºblicas (gobierno)
â€¢ Organizaciones de la sociedad civil
â€¢ Programas comunitarios
â€¢ Proyectos internos del TecNM
â€¢ Instituciones educativas

**ğŸ’° BECA DISPONIBLE:**
Apoyo econÃ³mico mensual durante servicio
Consultar convocatoria en GestiÃ³n TecnolÃ³gica

**PROCESO:**
1. Asistir a seminario (obligatorio)
2. Elegir programa/instituciÃ³n
3. Registrar en GestiÃ³n TecnolÃ³gica
4. Realizar 480 horas
5. Entregar reporte final
6. Obtener carta de liberaciÃ³n

âš ï¸ REQUISITO OBLIGATORIO para titularte`
    },
    
    residencias: {
        keywords: ['residencia', 'residencias', 'profesional', 'profesionales', 'prÃ¡cticas', 'practicas', 'empresa', 'proyecto'],
        response: `ğŸ¢ **RESIDENCIAS PROFESIONALES - GUÃA**

**REQUISITOS:**
âœ… 85% de crÃ©ditos cubiertos
âœ… Servicio social liberado o avanzado
âœ… Estar inscrito
âœ… KÃ¡rdex actualizado

**DURACIÃ“N:**
â€¢ 4-6 meses (segÃºn carrera)
â€¢ MÃ­nimo 320 horas de trabajo
â€¢ Horario: SegÃºn acuerdo con empresa

**ğŸ“… SEMINARIO OBLIGATORIO:**
Fecha: 20 de febrero de 2025
Lugar: Por confirmar

**BENEFICIOS:**
âœ… Experiencia profesional real
âœ… Networking empresarial
âœ… 70% son contratados despuÃ©s
âœ… Puede ser opciÃ³n de titulaciÃ³n
âœ… Algunas empresas pagan beca
âœ… Carta de recomendaciÃ³n

**SECTORES DISPONIBLES:**
â€¢ Industria manufacturera
â€¢ TecnologÃ­as de informaciÃ³n
â€¢ ConstrucciÃ³n y obra civil
â€¢ Empresas quÃ­micas
â€¢ Gobierno municipal/estatal
â€¢ InvestigaciÃ³n y desarrollo

**PROCESO:**
1. Asistir a seminario
2. Buscar empresa/proyecto
3. Registrar en GestiÃ³n TecnolÃ³gica
4. Desarrollar proyecto
5. Elaborar informe tÃ©cnico
6. Presentar ante jurado

ğŸ’¡ Tu puerta de entrada al mundo laboral`
    },
    
    titulacion: {
        keywords: ['titulaciÃ³n', 'titulacion', 'titulo', 'tesis', 'egel', 'graduaciÃ³n', 'graduacion', 'cedula'],
        response: `ğŸ“ **OPCIONES DE TITULACIÃ“N**

**6 MODALIDADES DISPONIBLES:**

**1ï¸âƒ£ Tesis Profesional**
â€¢ InvestigaciÃ³n original
â€¢ DuraciÃ³n: 6-18 meses
â€¢ Con asesor de tesis

**2ï¸âƒ£ Residencia Profesional**
â€¢ Tu residencia = tÃ­tulo
â€¢ CalificaciÃ³n mÃ­nima: 80/100
â€¢ Informe tÃ©cnico + examen

**3ï¸âƒ£ Examen EGEL (CENEVAL)**
â€¢ Estandarizado nacional
â€¢ Sin tesis ni examen profesional
â€¢ Costo: $3,500-4,500
â€¢ Resultado satisfactorio/sobresaliente

**4ï¸âƒ£ Promedio Destacado**
â€¢ Promedio 90+ sin reprobadas
â€¢ TitulaciÃ³n automÃ¡tica
â€¢ Reconocimiento a excelencia

**5ï¸âƒ£ Estudios de Posgrado**
â€¢ Cursar maestrÃ­a en TecNM
â€¢ Acreditar 12 crÃ©ditos mÃ­nimo
â€¢ Promedio 80+ en posgrado

**6ï¸âƒ£ TitulaciÃ³n Integral**
â€¢ Programa desde 1er semestre
â€¢ Acumular puntos durante carrera
â€¢ Alcanzar puntaje mÃ­nimo

**ğŸ“… CONVOCATORIAS 2025:**
â€¢ 1ra: Registro 8-20 feb, Ceremonia mayo
â€¢ 2da: Registro 10-30 may, Ceremonia julio
â€¢ 3ra: Registro desde 30 mayo

ğŸ’¡ Elige la opciÃ³n que mejor se adapte a ti`
    },
    
    idiomas: {
        keywords: ['inglÃ©s', 'ingles', 'idioma', 'idiomas', 'toefl', 'certificaciÃ³n', 'certificacion'],
        response: `ğŸŒ **CENTRO DE IDIOMAS - INGLÃ‰S**

âš ï¸ **REQUISITO OBLIGATORIO DE EGRESO**
Sin inglÃ©s = No hay tÃ­tulo

**NIVELES DISPONIBLES:**
â€¢ Nivel 1-2: BÃ¡sico (A1-A2)
â€¢ Nivel 3-4: Intermedio (B1-B1+)
â€¢ Nivel 5-6: Avanzado (B2-B2+)

**CURSOS:**
â€¢ Semestrales: $1,000-1,500
â€¢ DuraciÃ³n: 18 semanas por nivel
â€¢ Intensivos de verano disponibles

**EXAMEN DE LIBERACIÃ“N:**
ğŸ’° Costo: $500-800
ğŸ“… Convocatoria 2026: Por publicarse
âœ… CalificaciÃ³n mÃ­nima: 70/100

**CERTIFICACIONES:**
â€¢ TOEFL ITP: $600-900 (en TecNM)
â€¢ TOEFL iBT: $200-250 USD
â€¢ Cambridge: $3,000-5,000
â€¢ TOEIC: $1,500-2,000

**INSTALACIONES:**
âœ… Laboratorio de idiomas (40 PC)
âœ… Plataformas digitales
âœ… Profesores certificados

**BENEFICIOS DEL INGLÃ‰S:**
ğŸ’° 20-30% mÃ¡s de salario
ğŸŒ Movilidad internacional
ğŸ’¼ MÃ¡s ofertas de empleo
ğŸ“š Acceso a informaciÃ³n tÃ©cnica

ğŸ“ Informes: Centro de Idiomas, Ext. 160`
    },
    
    contacto: {
        keywords: ['contacto', 'telÃ©fono', 'telefono', 'direcciÃ³n', 'direccion', 'ubicaciÃ³n', 'ubicacion', 'donde', 'dÃ³nde'],
        response: `ğŸ“ **INFORMACIÃ“N DE CONTACTO**

**ğŸ“ DIRECCIÃ“N:**
Juan de Dios BÃ¡tiz y 20 de Noviembre
Col. Francisco Villa
Los Mochis, Sinaloa, MÃ©xico
C.P. 81259

**â˜ï¸ TELÃ‰FONOS:**
(668) 812-4939
(668) 815-0650 al 54

**ğŸŒ WEB Y REDES:**
ğŸ”— www.mochis.tecnm.mx
ğŸ“± Twitter: @TecNMLosMochis
ğŸ“˜ Facebook: TecNM Los Mochis
ğŸ“¸ Instagram: @tecnmlosmochis

**â° HORARIOS:**
Lunes a Viernes: 8:00 - 15:00 hrs
(Ãreas administrativas)

**ğŸšŒ CÃ“MO LLEGAR:**
Rutas: Juan de Dios BÃ¡tiz, Centro-Tec, Jiquilpan
Parada justo afuera del TecNM

ğŸ‰ #SomosDragonesITLM`
    },
    
    historia: {
        keywords: ['historia', 'aniversario', 'fundaciÃ³n', 'fundacion', 'aÃ±os', 'dragones', 'origen'],
        response: `ğŸ›ï¸ **HISTORIA DEL TecNM LOS MOCHIS**

**ğŸ‚ 48 AÃ‘OS DE EXCELENCIA (1976-2024)**

**FundaciÃ³n:** 1976
Una de las primeras instituciones tecnolÃ³gicas de Sinaloa

**2014:** IntegraciÃ³n al TecnolÃ³gico Nacional de MÃ©xico

**2023:** Gran logro - Ingreso al Sistema Nacional
de Posgrados CONACYT âœ…

**2024:** CelebraciÃ³n 48 Aniversario

**ğŸ‰ IDENTIDAD:**
Mascota: Los Dragones
Lema: El progreso como meta,
los principios como guÃ­a

**PARTE DEL TecNM:**
â€¢ 254 campus en MÃ©xico
â€¢ 600,000+ estudiantes
â€¢ Sistema mÃ¡s grande del paÃ­s

**IMPACTO:**
â€¢ Miles de egresados exitosos
â€¢ Desarrollo regional
â€¢ VinculaciÃ³n empresarial
â€¢ InvestigaciÃ³n aplicada

ğŸ‰ #SomosDragonesITLM
48 aÃ±os formando profesionistas de excelencia`
    }
};

window.onload = function() {
    addBotMessage(`Â¡Hola! ğŸ‘‹ Soy tu **Asistente Virtual Oficial** del **TecnolÃ³gico Nacional de MÃ©xico Campus Los Mochis**.

ğŸ‰ **#SomosDragonesITLM** - 48 aÃ±os de excelencia

**Puedo ayudarte con:**

ğŸ“š Licenciaturas y Posgrados
ğŸ“ Proceso de AdmisiÃ³n 2025
ğŸ’° Costos, Becas y Apoyos
ğŸ“… Calendario Escolar 2025
ğŸ“ TitulaciÃ³n (6 opciones)
ğŸ’¼ Servicio Social y Residencias
ğŸŒ Idiomas y Certificaciones
ğŸ“ Contacto e InformaciÃ³n

**Â¿En quÃ© puedo ayudarte hoy?**

ğŸ’¡ Tip: Usa los botones rÃ¡pidos o escribe tu pregunta`);
    
    document.getElementById('userInput').focus();
};


function sendMessage() {
    const input = document.getElementById('userInput');
    const message = input.value.trim();
    
    if (message === '') return;
    
    addUserMessage(message);
    input.value = '';
    
    showTyping();
    
    setTimeout(() => {
        hideTyping();
        const response = getBotResponse(message);
        addBotMessage(response);
    }, 1000);
}


function sendQuickMessage(query) {
    document.getElementById('userInput').value = query;
    sendMessage();
}


document.getElementById('userInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        sendMessage();
    }
});
    

function addUserMessage(text) {
    const messagesDiv = document.getElementById('messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message user-message';
    messageDiv.innerHTML = `
        <div class="avatar user-avatar">ğŸ‘¤</div>
        <div class="message-content">${escapeHtml(text)}</div>
    `;
    messagesDiv.appendChild(messageDiv);
    scrollToBottom();
}


function addBotMessage(text) {
    const messagesDiv = document.getElementById('messages');
    const messageDiv = document.createElement('div');
    messageDiv.className = 'message bot-message';
    messageDiv.innerHTML = `
        <div class="avatar bot-avatar">ğŸ¤–</div>
        <div class="message-content">${formatMessage(text)}</div>
    `;
    messagesDiv.appendChild(messageDiv);
    scrollToBottom();
}
 

function getBotResponse(message) {
    const normalized = message.toLowerCase();
    
    for (const [key, data] of Object.entries(knowledgeBase)) {
        for (const keyword of data.keywords) {
            if (normalized.includes(keyword)) {
                return data.response;
            }
        }
    }
    
    return `Gracias por tu pregunta. 

Puedo ayudarte con informaciÃ³n sobre:

ğŸ“š **Carreras** - 11 licenciaturas disponibles
ğŸ“ **AdmisiÃ³n** - Proceso completo 2025
ğŸ’° **Becas** - Apoyo econÃ³mico
ğŸ“… **Calendario** - Fechas importantes
ğŸ“ **TitulaciÃ³n** - 6 opciones
ğŸ’¼ **Servicio Social** - Requisitos
ğŸ¢ **Residencias** - GuÃ­a completa
ğŸŒ **Idiomas** - Centro de inglÃ©s
ğŸ“ **Contacto** - UbicaciÃ³n e informaciÃ³n

ğŸ‰ Escribe una palabra clave como: "carreras", "admisiÃ³n", "becas", etc.`;
}



function formatMessage(text) {
    return text
        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
        .replace(/\n/g, '<br>');
}



function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}


function showTyping() {
    document.getElementById('typingIndicator').style.display = 'flex';
    scrollToBottom();
}



function hideTyping() {
    document.getElementById('typingIndicator').style.display = 'none';
}



function scrollToBottom() {
    const container = document.getElementById('chatContainer');
    setTimeout(() => {
        container.scrollTop = container.scrollHeight;
    }, 100);
}

console.log('ğŸ¤– Chatbot TecNM Los Mochis iniciado correctamente');
console.log('ğŸ‰ #SomosDragonesITLM');